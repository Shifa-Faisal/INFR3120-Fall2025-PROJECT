<%- include('../partials/header') %>
<%- include('../partials/main_nav') %>
<!--Main content for displaying my database-->
<main class="container">
    <div class="row">
        <div class="offset-md-1 col-md-10">
            <h1><%= title %></h1>
            <p class="lead">Browse all reviews in the media store.</p>
            <a href="/media/add" class="btn btn-primary" role="button">
            <i class="fas fa-plus-circle"></i> Add a Review
            </a>
            <br> 

            <table class="table table-bordered table-striped table-hover">
                <!--Header Row-->
                <tr class="d-flex">
                    <th class="text-center col-1">Media Type</th>
                    <th class="text-center col-1">Name</th>
                    <th class="text-center col-4">Description</th>
                    <th class="text-center col-1">Rating</th>
                    <th class="text-center col-3">Review</th>
                </tr>

                <% 
                  // Safe fallback: if mediaList is undefined, use an empty array
                  const items = mediaList || [];
                %>

                <!--for/while loop-->
                <% for(let count=0; count<mediaList.length;count++) { %>
                    <tr class="d-flex">
                        <td class="text-center col-1"><%= mediaList[count]["Media Type"] %></td>
                        <td class="text-center col-1"><%= mediaList[count]["Name"] %></td>
                        <td class="text-center col-4"><%= mediaList[count]["Description"] %></td>
                        <td class="text-center col-1"><%= mediaList[count]["Rating (out of 5 stars)"] %></td>
                        <td class="text-center col-3"><%= mediaList[count]["Review"] %></td>
                       
                        <td class="text-center col-1">
                        <a href="/media/edit/<%= mediaList[count]._id%>" 
                        class="btn btn-primary btn-sm">
                        <i class="fas fa-pencil-alt"></i> Edit </a>
                        </td>

                        <td class="text-center col-1">
                        <a href="/media/delete/<%= mediaList[count]._id%>" 
                        class="btn btn-danger btn-sm"> 
                        <i class="fas fa-trash-alt"></i> Delete</a>
                        </td>

                    </tr>
                <% } %>
            </table>

        </div>
    </div>
</main>
<%- include('../partials/footer') %>